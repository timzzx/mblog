---
title: "TCP/IP学习理解(一)"
date: 2018-07-11T16:31:53+08:00
categories: [TCP/IP]
tags: [2018-07]
gitment: true
TableOfContents: true
---
>Transmission Control Protocol/Internet Protocol的简写，中译名为传输控制协议/因特网互联协议，又名网络通讯协议，是Internet最基本的协议、Internet国际互联网络的基础，由网络层的IP协议和传输层的TCP协议组成。TCP/IP 定义了电子设备如何连入因特网，以及数据如何在它们之间传输的标准。协议采用了4层的层级结构，每一层都呼叫它的下一层所提供的协议来完成自己的需求。通俗而言：TCP负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而IP是给因特网的每一台电脑规定一个地址。

# TCP/IP四层模型
<table> <tr> <td><b> 应用层 </b> </td> <td> HTTP </td> </tr> <tr> <td> <b> 运输层 </b> </td> <td> TCP、UDP </td> </tr> <tr> <td><b> 网络层（互联网层） </b> </td> <td> IP </td> </tr> <tr> <td> <b> 链路层（数据链路层/网络接口层） </b> </td> <td> 设备驱动程序、计算机中对应的网络接口卡 </td> </tr> </table>

# OSI七层模型
<table> <tr> <td> 应用层 </td> </tr> <tr> <td> 表示层 </td> </tr> <tr> <td> 会话层 </td> </tr> <tr> <td> 传输层 </td> </tr> <tr> <td> 网络层 </td> </tr> <tr> <td> 数据链路层 </td> </tr> <tr> <td> 物理层 </td> </tr> </table>

## OSI七层模式简单通俗理解
> 这个模型推出的最开始，是是因为美国人有两台机器之间进行通信的需求。

### 需求1：物理层
科学家要解决的第一个问题是，两个硬件之间怎么通信。具体就是一台发些比特流，然后另一台能收到。

> 于是，科学家发明了物理层：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是传输比特流(就是由1、0转化为电流强弱来进行传输，到达目的地后在转化为1、0，也就是我们常说的数模转换与模数转换)。这一层的数据叫做比特。

### 需求2：数据链路层
现在通过电线我能发数据流了，但是，我还希望通过无线电波，通过其它介质来传输。然后我还要保证传输过去的比特流是正确的，要有纠错功能。

> 于是，发明了数据链路层：定义了如何让格式化数据以进行传输，以及如何让控制对物理介质的访问。这一层通常还提供错误检测和纠正，以确保数据的可靠传输。

### 需求3：传输层
现在我能发正确的发比特流数据到另一台计算机了，但是当我发大量数据时候，可能需要好长时间，例如一个视频格式的，网络会中断好多次（事实上，即使有了物理层和数据链路层，网络还是经常中断，只是中断的时间是毫秒级别的）。那么，我还须要保证传输大量文件时的准确性。于是，我要对发出去的数据进行封装。就像发快递一样，一个个地发。

> 于是，先发明了传输层（传输层在OSI模型中，是在网络层上面） 例如TCP，是用于发大量数据的，我发了1万个包出去，另一台电脑就要告诉我是否接受到了1万个包，如果缺了3个包，就告诉我是第1001，234，8888个包丢了，那我再发一次。这样，就能保证对方把这个视频完整接收了。 例如UDP，是用于发送少量数据的。我发20个包出去，一般不会丢包，所以，我不管你收到多少个。在多人互动游戏，也经常用UDP协议，因为一般都是简单的信息，而且有广播的需求。如果用TCP，效率就很低，因为它会不停地告诉主机我收到了20个包，或者我收到了18个包，再发我两个！如果同时有1万台计算机都这样做，那么用TCP反而会降低效率，还不如用UDP，主机发出去就算了，丢几个包你就卡一下，算了，下次再发包你再更新。 TCP协议是会绑定IP和端口的协议，下面会介绍IP协议。

### 需求4：网络层
传输层只是解决了打包的问题。但是如果我有多台计算机，怎么找到我要发的那台？或者，A要给F发信息，中间要经过B，C，D,E，但是中间还有好多节点如K.J.Z.Y。我怎么选择最佳路径？这就是路由要做的事。

> 于是，发明了网络层。即路由器，交换机那些具有寻址功能的设备所实现的功能。这一层定义的是IP地址，通过IP地址寻址。所以产生了IP协议。

### 需求5：会话层
现在我们已经保证给正确的计算机，发送正确的封装过后的信息了。但是用户级别的体验好不好？难道我每次都要调用TCP去打包，然后调用IP协议去找路由，自己去发？当然不行，所以我们要建立一个自动收发包，自动寻址的功能。

> 于是，发明了会话层。会话层的作用就是建立和管理应用程序之间的通信。

### 需求6：表示层
现在我能保证应用程序自动收发包和寻址了。但是我要用Linux给window发包，两个系统语法不一致，就像安装包一样，exe是不能在linux下用的，shell在window下也是不能直接运行的。

> 于是需要表示层（presentation），帮我们解决不同系统之间的通信语法问题。

### 需求7：应用层
OK，现在所有必要条件都准备好了，我们可以写个android程序，web程序去实现需求把。

# TCP/IP四层模型和OSI七层模型的对应表
<table> <tr> <td> OSI七层网络模型 </td> <td> TCP/IP四层模型 </td> <td> 对应网络协议 </td> </tr> <tr> <td> 应用层 </td> <td rowspan="3">应用层</td> <td> TFTP,FTP,NFS,WAIS </td> </tr> <tr> <td> 表示层 </td> <td> Telnet,Rlogin,SNMP,Gopher </td> </tr> <tr> <td> 会话层 </td> <td> SMTP,DNS </td> </tr> <tr> <td> 传输层 </td> <td> 传输层 </td> <td> TCP,UDP </td> </tr> <tr> <td> 网络层 </td> <td> 网络层 </td> <td> IP,ICMP,ARP,RARP,AKP,UUCP </td> </tr> <tr> <td> 数据链路层 </td> <td rowspan="2">网络接口</td> <td> FDDI,Ethernet,Arpanet,PDF,SLIP,PPP </td> </tr> <tr> <td> 物理层 </td> <td> IEEE 802.1A,IEEE 802.2到IEEE802.11 </td> </tr> </table>